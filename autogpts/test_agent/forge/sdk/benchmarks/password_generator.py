import random
import string


def generate_password(len=8):
    """
    Generates a random password with a specified length between 8 and 16 characters.
    The password must contain at least one letter, number, and symbol.
    The password can be generated by running the python file password_generator.py [--len x],
    where x is the desired length of the password. If no length is specified, the password
    will default to 8 characters.
    The password_generator can also be imported as a module and called as password = password_generator.generate_password(len=x).
    Any invalid input will raise a ValueError.
    """
    if len < 8 or len > 16:
        raise ValueError("Password length must be between 8 and 16 characters.")

    # Generate a list of characters to choose from
    characters = string.ascii_letters + string.digits + string.punctuation

    # Initialize an empty list to store the password characters
    password = []

    # Add at least one letter, number, and symbol to the password
    password.append(random.choice(string.ascii_letters))
    password.append(random.choice(string.digits))
    password.append(random.choice(string.punctuation))

    # Fill the remaining characters with random choices from the list
    for i in range(len - 3):
        password.append(random.choice(characters))

    # Shuffle the password characters
    random.shuffle(password)

    # Join the characters into a string
    password = "".join(password)

    # Print the password to the console
    print(password)

    return password


if __name__ == "__main__":
    import argparse

    # Create an argument parser
    parser = argparse.ArgumentParser(description="Generate a random password.")

    # Add an optional argument for password length
    parser.add_argument(
        "--len", type=int, default=8, help="Length of the password (default: 8)"
    )

    # Parse the arguments
    args = parser.parse_args()

    # Generate the password
    generate_password(args.len)
